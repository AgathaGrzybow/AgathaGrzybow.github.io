<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keep Smiling</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        #lock-animation {
            white-space: pre;
            font-family: monospace;
            font-size: 16px;
            display: none; /* Hide initially */
        }
    </style>
</head>
<body>
    <div class="message">KEEP SMILING</div>
    <input type="password" id="password" placeholder="Enter Password" />
    <button id="submit">Submit</button>
    <div id="lock-animation"></div> <!-- Placeholder for the animation -->
<script>
const correctPasswordHash = "6dcb0e84f3d7d9f076db16f99e90abafeeb4a83ab1079b021b346977368c4d6a"; // Predefined hash
const message = document.querySelector('.message');
const lockAnimationDiv = document.getElementById('lock-animation');

setInterval(() => {
    message.style.opacity = message.style.opacity === '0' ? '1' : '0';
}, 3000);

async function hashPassword(password) {
    const encoder = new TextEncoder();
    const data = encoder.encode(password);
    const hash = await crypto.subtle.digest('SHA-256', data);
    const hashedString = Array.from(new Uint8Array(hash)).map(b => b.toString(16).padStart(2, '0')).join('');
    
    console.log('Hashed Password:', hashedString); // Log the hashed password
    return hashedString;
}

function playLockAnimation() {
    const animationFrames = [
        `    .------.
   /  ~ ~   \\
  |  ~ ~ ~  |
   \\________/
     |    |
     |    |`,
        `    .------.
   /  ~ ~   \\
  |  ~ ~ ~  |
   \\________/
     |    |
     |    |
     |    |   
     |    |   
       ( )  `,
        `    .------.
   /  ~ ~   \\
  |  ~ ~ ~  |
   \\________/
     |    |
     |    |
     |    |   
     |    |   
      [ ]   `
    ];

    let currentFrame = 0;
    lockAnimationDiv.style.display = 'block'; // Show the ASCII art container

    const interval = setInterval(() => {
        lockAnimationDiv.textContent = animationFrames[currentFrame];
        currentFrame++;
        if (currentFrame === animationFrames.length) {
            clearInterval(interval);
            setTimeout(() => {
                window.location.href = 'secret.html'; // Redirect to secret page after animation
            }, 1000);
        }
    }, 500); // Change frame every 500ms
}

document.getElementById('submit').onclick = async function () {
    const passwordField = document.getElementById('password');
    const password = passwordField.value.trim(); // Trim whitespace
    const hashedInput = await hashPassword(password);

    console.log('Input Password:', password); // Log input password
    console.log('Input Hashed:', hashedInput); // Log the hashed input for comparison

    if (hashedInput === correctPasswordHash) {
        playLockAnimation(); // Play animation if password is correct
    } else {
        alert('Incorrect password!');
    }
};
</script>
</body>
</html>
