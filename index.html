<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Checker</title>
    <style>
        body {
            background-color: black;
            color: lime; /* Bright green color */
            font-family: monospace;
            overflow: hidden;
            text-align: center; /* Center contents */
        }
        #lock-animation {
            white-space: pre; /* Preserve whitespace in ASCII art */
            display: none; /* Hide by default */
            font-size: 24px; /* Increase font size */
            animation: glitch 1s infinite alternate; /* Glitch effect */
            margin-top: 20%; /* Centering on the page */
        }
        @keyframes glitch {
            0% { opacity: 1; }
            20% { opacity: 0.8; }
            40% { opacity: 0.2; }
            60% { opacity: 0.6; }
            80% { opacity: 0.4; }
            100% { opacity: 1; }
        }
        /* Hide inputs and message when password is correct */
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="message">Enter Password:</div>
    <input type="text" id="password" />
    <button id="submit">Submit</button>
    <div id="lock-animation"></div>

    <script>
        const correctPasswordHash = "2b40b494dec3f3354e6b062eee145875fc0d2994341691f70179735e1fe1a8be"; // Updated hashed password
        const message = document.querySelector('.message');
        const lockAnimationDiv = document.getElementById('lock-animation');

        setInterval(() => {
            message.style.opacity = message.style.opacity === '0' ? '1' : '0';
        }, 3000);

        async function hashPassword(password) {
            const encoder = new TextEncoder();
            const data = encoder.encode(password);
            const hash = await crypto.subtle.digest('SHA-256', data);
            const hashedString = Array.from(new Uint8Array(hash)).map(b => b.toString(16).padStart(2, '0')).join('');
            console.log('Hashed Password:', hashedString);
            return hashedString;
        }

        function playLockAnimation() {
            const animationFrames = [
                `   .------.
  /  ~ ~   \\
 |  ~ ~ ~  |
  \\________/
      |   |
      |   |`,
                `   .------.
  /  ~ ~   \\
 |  ~ ~ ~  |
  \\________/
      |   |
      |   |
      |   |  ( )
    [=======]`,
                `   .------.
  /  ~ ~   \\
 |  ~ ~ ~  |
  \\________/
      |   |
      |   |
      |   |
    [=======]`
            ];

            let currentFrame = 0;
            lockAnimationDiv.style.display = 'block'; // Show the ASCII art container

            const interval = setInterval(() => {
                lockAnimationDiv.textContent = animationFrames[currentFrame];
                currentFrame++;
                if (currentFrame === animationFrames.length) {
                    clearInterval(interval);
                    setTimeout(() => {
                        window.location.href = 'secret.html'; // Redirect to secret page after animation
                    }, 1000);
                }
            }, 500); // Change frame every 500ms
        }

        document.getElementById('submit').onclick = async function () {
            const passwordField = document.getElementById('password');
            const password = passwordField.value.trim(); // Trim whitespace
            const hashedInput = await hashPassword(password);

            console.log('Input Password:', password); // Log input password
            console.log('Input Hashed:', hashedInput); // Log the hashed input for comparison

            if (hashedInput === correctPasswordHash) {
                // Hide all but ASCII art
                document.body.querySelectorAll('.message, #password, #submit').forEach(el => {
                    el.classList.add('hidden');
                });
                lockAnimationDiv.style.display = 'block'; // Show the ASCII art
                playLockAnimation(); // Play animation if password is correct
            } else {
                alert('Incorrect password!');
            }
        };
    </script>
</body>
</html>
